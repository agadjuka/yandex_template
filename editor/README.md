# –≠–¥–∏—Ç–æ—Ä –ø—Ä–æ–º–ø—Ç–æ–≤ –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤

## –ß—Ç–æ —ç—Ç–æ?

–≠–¥–∏—Ç–æ—Ä ‚Äî –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ–º–ø—Ç–æ–≤ –∞–≥–µ–Ω—Ç–æ–≤ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–¥–∞ –Ω–∞–ø—Ä—è–º—É—é.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úèÔ∏è **–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–æ–≤ –∞–≥–µ–Ω—Ç–æ–≤** ‚Äî –∏–∑–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–æ–≤ –≤ —Ñ–∞–π–ª–∞—Ö `src/agents/*_agent.py`
- üîÑ **–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–∞ —Ä–æ—É—Ç–µ—Ä–∞** ‚Äî –∏–∑–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–∞ –≤ `src/agents/stage_detector_agent.py`
- üß™ **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤** ‚Äî –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ —Å –∑–∞–¥–∞–Ω–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏

## –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç?

–≠–¥–∏—Ç–æ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ Flask –≤–µ–±-—Å–µ—Ä–≤–µ—Ä –∏ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑:

1. **–ü–∞—Ä—Å–µ—Ä** (`parser.py`) ‚Äî –∏–∑–≤–ª–µ–∫–∞–µ—Ç –ø—Ä–æ–º–ø—Ç—ã –∏–∑ —Ñ–∞–π–ª–æ–≤ –ø—Ä–æ–µ–∫—Ç–∞
2. **–û–±–Ω–æ–≤–ª—è—Ç–æ—Ä** (`updater.py`) ‚Äî —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–æ–º–ø—Ç–æ–≤ –æ–±—Ä–∞—Ç–Ω–æ –≤ —Ñ–∞–π–ª—ã
3. **–ü–æ–º–æ—â–Ω–∏–∫ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤** (`tools_helper.py`) ‚Äî –∑–∞–≥—Ä—É–∂–∞–µ—Ç –∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
4. **–ó–∞–≥—Ä—É–∑—á–∏–∫ —Ä–µ–µ—Å—Ç—Ä–æ–≤** (`registry_loader.py`) ‚Äî –∑–∞–≥—Ä—É–∂–∞–µ—Ç —Ä–µ–µ—Å—Ç—Ä—ã –±–µ–∑ —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö –∏–º–ø–æ—Ä—Ç–æ–≤
5. **–£—Ç–∏–ª–∏—Ç—ã –ø—Ä–æ–º–ø—Ç–æ–≤** (`prompt_utils.py`) ‚Äî –æ–±—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø—Ä–æ–º–ø—Ç–∞–º–∏
6. **–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** (`templates/index.html`) ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

–≠–¥–∏—Ç–æ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫:
- **–†–µ–µ—Å—Ç—Ä—É –∞–≥–µ–Ω—Ç–æ–≤** (`src/agents/registry.py`) ‚Äî –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –≤—Å–µ—Ö –∞–≥–µ–Ω—Ç–æ–≤
- **–†–µ–µ—Å—Ç—Ä—É –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤** (`src/agents/tools/registry.py`) ‚Äî –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –≤—Å–µ—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤

## –ó–∞–ø—É—Å–∫

```bash
python run_editor.py
```

–≠–¥–∏—Ç–æ—Ä –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: `http://localhost:5000`

## –í–∞–∂–Ω–æ

- **–ò–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è —Å—Ä–∞–∑—É** ‚Äî –ø—Ä–æ–º–ø—Ç—ã –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –≤ —Ñ–∞–π–ª–∞—Ö –±–µ–∑ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞
- **–ê–≥–µ–Ω—Ç—ã –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –±–µ—Ä—É—Ç—Å—è –∏–∑ —Ä–µ–µ—Å—Ç—Ä–æ–≤** ‚Äî –Ω–æ–≤—ã–µ –∞–≥–µ–Ω—Ç—ã/–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞—é—Ç—Å—è —Ä–µ–µ—Å—Ç—Ä–∞–º–∏
- **–†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚Äî –ø–µ—Ä–µ–¥ –º–∞—Å—Å–æ–≤—ã–º–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Å–¥–µ–ª–∞—Ç—å –±—ç–∫–∞–ø —Ñ–∞–π–ª–æ–≤

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
Editor/
‚îú‚îÄ‚îÄ app.py              # Flask –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å API endpoints
‚îú‚îÄ‚îÄ parser.py           # –ü–∞—Ä—Å–µ—Ä –ø—Ä–æ–º–ø—Ç–æ–≤ –∏–∑ —Ñ–∞–π–ª–æ–≤
‚îú‚îÄ‚îÄ updater.py          # –û–±–Ω–æ–≤–ª—è—Ç–æ—Ä –ø—Ä–æ–º–ø—Ç–æ–≤ –≤ —Ñ–∞–π–ª–∞—Ö
‚îú‚îÄ‚îÄ tools_helper.py     # –ü–æ–º–æ—â–Ω–∏–∫ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏
‚îú‚îÄ‚îÄ registry_loader.py  # –ó–∞–≥—Ä—É–∑—á–∏–∫ —Ä–µ–µ—Å—Ç—Ä–æ–≤ –±–µ–∑ —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö –∏–º–ø–æ—Ä—Ç–æ–≤
‚îú‚îÄ‚îÄ prompt_utils.py     # –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø—Ä–æ–º–ø—Ç–∞–º–∏
‚îú‚îÄ‚îÄ templates/
‚îÇ   ‚îî‚îÄ‚îÄ index.html      # –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îî‚îÄ‚îÄ README.md           # –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

## –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ø—Ä–æ–µ–∫—Ç—É

–≠–¥–∏—Ç–æ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ –ø—Ä–æ–µ–∫—Ç—É —á–µ—Ä–µ–∑:

1. **–†–µ–µ—Å—Ç—Ä –∞–≥–µ–Ω—Ç–æ–≤** (`src/agents/registry.py`)
   - –†–µ–µ—Å—Ç—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç –≤—Å–µ—Ö –∞–≥–µ–Ω—Ç–æ–≤ –∏–∑ –ø–∞–ø–∫–∏ `src/agents/`
   - –î–ª—è –∫–∞–∂–¥–æ–≥–æ –∞–≥–µ–Ω—Ç–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç –ø—Ä–æ–º–ø—Ç –∏–∑ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–≥–æ —Ñ–∞–π–ª–∞
   - –ò—Å–∫–ª—é—á–∞–µ—Ç —Å–ª—É–∂–µ–±–Ω—ã–µ —Ñ–∞–π–ª—ã: `base_agent.py`, `stage_detector_agent.py`, `__init__.py`, `registry.py`, `dialogue_stages.py`

2. **–†–µ–µ—Å—Ç—Ä –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤** (`src/agents/tools/registry.py`)
   - –†–µ–µ—Å—Ç—Ä –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –≤—Å–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∏–∑ `src/agents/tools/__init__.py`
   - –ü–æ–∑–≤–æ–ª—è–µ—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Å –∑–∞–¥–∞–Ω–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –≤—Å–µ –∫–ª–∞—Å—Å—ã BaseModel —Å –º–µ—Ç–æ–¥–æ–º `process`

3. **–§–∞–π–ª—ã –∞–≥–µ–Ω—Ç–æ–≤** (`src/agents/*_agent.py`)
   - –≠–¥–∏—Ç–æ—Ä —á–∏—Ç–∞–µ—Ç –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç –ø—Ä–æ–º–ø—Ç—ã –Ω–∞–ø—Ä—è–º—É—é –≤ —Ñ–∞–π–ª–∞—Ö –∞–≥–µ–Ω—Ç–æ–≤
   - –ü—Ä–æ–º–ø—Ç—ã –∏–∑–≤–ª–µ–∫–∞—é—Ç—Å—è –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `instruction` –≤ –º–µ—Ç–æ–¥–µ `__init__`

4. **–ü—Ä–æ–º–ø—Ç —Ä–æ—É—Ç–µ—Ä–∞** (`src/agents/stage_detector_agent.py`)
   - –≠–¥–∏—Ç–æ—Ä —á–∏—Ç–∞–µ—Ç –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç –ø—Ä–æ–º–ø—Ç —Ä–æ—É—Ç–µ—Ä–∞

**–ù–∏–∫–∞–∫–∏—Ö –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è** ‚Äî –ø—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å—Ç–∏—Ç–µ —ç–¥–∏—Ç–æ—Ä –∏ –æ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥–∫–ª—é—á–∏—Ç—Å—è –∫ –ø—Ä–æ–µ–∫—Ç—É.

## –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –∞–≥–µ–Ω—Ç–æ–≤

–ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ –∞–≥–µ–Ω—Ç–∞:

1. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `*_agent.py` –≤ –ø–∞–ø–∫–µ `src/agents/`
2. –†–µ–µ—Å—Ç—Ä –∞–≥–µ–Ω—Ç–æ–≤ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–∞—Ä—É–∂–∏—Ç –Ω–æ–≤—ã–π —Ñ–∞–π–ª
3. –ê–≥–µ–Ω—Ç –ø–æ—è–≤–∏—Ç—Å—è –≤ —Å–ø–∏—Å–∫–µ —Å—Ç–∞–¥–∏–π –≤ —ç–¥–∏—Ç–æ—Ä–µ

## –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤

–ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞:

1. –°–æ–∑–¥–∞–π—Ç–µ –∫–ª–∞—Å—Å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ (–Ω–∞—Å–ª–µ–¥–Ω–∏–∫ `BaseModel` —Å –º–µ—Ç–æ–¥–æ–º `process`)
2. –î–æ–±–∞–≤—å—Ç–µ –∏–º–ø–æ—Ä—Ç –≤ `src/agents/tools/__init__.py`
3. –î–æ–±–∞–≤—å—Ç–µ –∫–ª–∞—Å—Å –≤ —Å–ø–∏—Å–æ–∫ `__all__` –≤ `src/agents/tools/__init__.py`
4. –î–æ–±–∞–≤—å—Ç–µ –∫–ª–∞—Å—Å –≤ —Å–ø–∏—Å–æ–∫ `tools_list` –≤ `src/agents/tools/registry.py`
5. –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –ø–æ—è–≤–∏—Ç—Å—è –≤ —Å–ø–∏—Å–∫–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –≤ —ç–¥–∏—Ç–æ—Ä–µ

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–≠–¥–∏—Ç–æ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –º–æ–¥—É–ª—å–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É:

- **registry_loader.py** ‚Äî –æ–±—â–∏–π –º–æ–¥—É–ª—å –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ä–µ–µ—Å—Ç—Ä–æ–≤ –±–µ–∑ —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö –∏–º–ø–æ—Ä—Ç–æ–≤
- **prompt_utils.py** ‚Äî –æ–±—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–æ–º–ø—Ç–æ–≤
- –í—Å–µ –º–æ–¥—É–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —ç—Ç–∏ –æ–±—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏, —á—Ç–æ –∏—Å–∫–ª—é—á–∞–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
